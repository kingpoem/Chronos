# Chronos OS - 内存配置

## 📋 物理内存大小

**128MB** - QEMU virt 机器的默认配置

### 代码定义

```rust
// kernel/src/config.rs
pub const MEMORY_END: usize = 0x8800_0000;  // 128MB
```

### 计算验证

```
起始地址: 0x8000_0000
结束地址: 0x8800_0000
大小 = 0x8800_0000 - 0x8000_0000 = 0x0800_0000 = 128MB
```

## 💾 内存布局

```
0x8000_0000  ┌─────────────────────┐
              │ RustSBI (~1MB)      │
0x8020_0000  ├─────────────────────┤
              │ Kernel (~2MB)       │
0x8042_0000  ├─────────────────────┤
              │ Kernel Heap (8MB)   │
0x80C2_0000  ├─────────────────────┤
              │ Available (~117MB)  │
0x8800_0000  └─────────────────────┘
```

## 🔧 QEMU 配置

默认运行命令：
```bash
qemu-system-riscv64 -machine virt -m 128M
```

如果需要更大内存：
```bash
qemu-system-riscv64 -machine virt -m 256M
```

## 📝 说明

128MB 是 QEMU virt 机器的默认内存大小，足以运行基础操作系统功能。如果需要更大内存，可以通过 `-m` 参数调整，但需要相应修改内核配置。